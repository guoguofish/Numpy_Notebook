# Universal functions \(ufunc\)

简单地说， 一个ufunc就是一个函数，它**并行**处理ndarray数据块里的每一个元素。

输入一个数据块进来，它就会输出一个数据块。形状也有可能发生改变。

## Broadcasting

这个概念是说当两块数据在作某种处理时，比例说加法，输入的这两块数据的形状shape 不一样，那么其中那个较小的数据就要变形成另外那块数据的样子，使得二者的shape一致，这样就具备了并行处理的条件，二者的元素可以一一对应了。

需要注意的是，大多数情况下，一般只有一个数据块被Broadcasting 变形，但也有两个数据块同时被Broadcasting 变形。

这些事不需要我们亲自来做，ufunc函数在内部就已经为我们做好了，我们要做的其实是在ufunc函数工作之前，为其输入可以被Broadcasting 统一变形的数据块即可，当然不是所有天马行空的数据块都可以被Broadcasting变形。

Broadcasting的处理不仅发生在ufunc函数内部，也发生在算数运算符（+ - \* / .....）身上。

即当两个数据块之间有运算符时，也会发生 Broadcasting。

下面是一些Broadcasting的例子。

![](/assets/Broadcasting.png)

我们看到这里是有其规律的。

参与计算的两个数据块，它们对应的轴向（维度）要么大小一样，要么有一个大小为1。它们就具备了Broadcasting的条件。

插图里最下面的例子是参入计算的两个数据块都发生了Broadcasting。那么结果数据的形状和输入数据的形状都不同。

